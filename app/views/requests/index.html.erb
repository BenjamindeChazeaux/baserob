
<!-- AI Analytics Dashboard -->
<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h1>AI Analytics Dashboard</h1>
      <p class="lead">Track and analyze your AI performance metrics</p>

      <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">AI Performance Overview</h5>
        </div>
        <div class="card-body">
          <p>Welcome to your AI Analytics dashboard. Here you can monitor and evaluate various AI metrics and performance indicators.</p>

          <div class="alert alert-info">
            <i class="fa fa-info-circle"></i> This is a placeholder for your AI analytics content. You can customize this view with your specific analytics data and visualizations.
          </div>

          <!-- Sample analytics sections -->
          <div class="row mt-4">
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-header">Usage Metrics</div>
                <div class="card-body">
                  <p>AI usage statistics and frequency analysis would appear here.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-header">Performance Metrics</div>
                <div class="card-body">
                  <p>AI performance and accuracy metrics would appear here.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center mt-3">
        <a href="<%= welcome_path %>" class="btn btn-secondary">Back to Dashboard</a>
      </div>
    </div>
  </div>
</div>

<div class="container">
<div class="row">

<%= simple_form_for :search, url: requests_path, method: :get, local: true do |f| %>
  <div class="form-row">
    <div class="col-md-4">
      <%#= label_tag :ai_provider, "AI Provider" %>
      <%= f.input :ai_provider, collection: AiProvider.all, include_blank: "All AI Providers", class: "form-control" %>
    </div>

    <!-- Filtre par Timeline -->
    <div class="col-md-4">
      <%#= label_tag :timeline, "Timeline" %><br>
      <%#= date_field_tag :start_date, params[:start_date], class: "form-control" %>
      <%#= date_field_tag :end_date, params[:end_date], class: "form-control" %>
    </div>
  </div>

  <%= submit_tag "Filter", class: "btn btn-primary mt-2" %>
<% end %>

<!-- Display the count -->
<p><strong>AI Crawler Requests:</strong> <%= @ai_crawler_requests_count %></p>

<!-- Display the filtered requests -->
<table class="table table-striped table-bordered">

    <% @requests.each do |request| %>
      <tr>
        <td><%= request.user_agent %></td>
        <td><%= request.referrer %></td>
        <td><%= request.domain %></td>
        <td><%= request.path %></td>
        <td><%= request.company.name %></td>
        <td><%= request.ai_provider.name %></td>
      </tr>
    <% end %>
  </tbody>
</table>
</div>

</div>
