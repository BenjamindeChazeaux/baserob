<!-- AI Analytics Dashboard -->
<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h1>AI Analytics Dashboard</h1>
      <p class="lead">Track and analyze your AI performance metrics</p>

      <div class="card shadow-sm mb-4">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">AI Performance Overview</h5>
        </div>
        <div class="card-body">
          <p>Welcome to your AI Analytics dashboard. Here you can monitor and evaluate various AI metrics and performance indicators.</p>

          <div class="alert alert-info">
            <i class="fa fa-info-circle"></i> This is a placeholder for your AI analytics content. You can customize this view with your specific analytics data and visualizations.
          </div>

          <!-- Sample analytics sections -->
          <div class="row mt-4">
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-header">Usage Metrics</div>
                <div class="card-body">
                  <p>AI usage statistics and frequency analysis would appear here.</p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card mb-3">
                <div class="card-header">Performance Metrics</div>
                <div class="card-body">
                  <p>AI performance and accuracy metrics would appear here.</p>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>

      <div class="text-center mt-3">
        <a href="<%= welcome_path %>" class="btn btn-secondary">Back to Dashboard</a>
      </div>
    </div>
  </div>
</div>


<div class="filter-container mb-4">
        <%= simple_form_for :search, url: requests_path, method: :get, local: true do |f| %>
          <div class="row">
            <div class="col-md-4">
              <%= f.input :ai_provider, collection: AiProvider.all, include_blank: "All AI Providers", class: "form-control" %>
            </div>

            <div class="col-md-2 text-center">
              <%= f.submit "Filter", class: "btn btn-primary" %>
            </div>
          </div>
        <% end %>
      </div>

      <!-- Display AI Crawler Requests Count -->
      <div class="alert alert-success text-center">
        <strong>Total AI Crawler Requests:</strong> <%= @ai_crawler_requests_count %>
      </div>

      <!-- Display Requests Table -->
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>User Agent</th>
            <th>Referrer</th>
            <th>Domain</th>
            <th>Path</th>
            <th>Company</th>
            <th>AI Provider</th>
          </tr>
        </thead>
        <tbody>
          <% if @requests.any? %>
            <% @requests.each do |request| %>
              <tr>
                <td><%= request.user_agent %></td>
                <td><%= request.referrer %></td>
                <td><%= request.domain %></td>
                <td><%= request.path %></td>
                <td><%= request.company.name %></td>
                <td><%= request.ai_provider.name %></td>
              </tr>
            <% end %>
          <% else %>
            <tr>
              <td colspan="6" class="text-center text-muted">No AI crawler requests found.</td>
            </tr>
          <% end %>
        </tbody>
      </table>

      <!-- Bouton de Retour -->
