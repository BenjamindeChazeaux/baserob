<div id="requests_list" class="requests">
  <div class="metric-card mb-3">
    <div class="metric-header">
      <h3>Total Visits</h3>
      <div class="metric-icon">
        <i class="fi fi-tr-users"></i>
      </div>
    </div>
    <div class="metric-value">
      <span class="value"><%= company.requests.count %></span>
    </div>
    <p class="metric-period">All time</p>
  </div>

  <!-- Carte 2: Volume total de visites issues des IA -->
  <div class="metric-card mb-3">
    <div class="metric-header">
      <h3>AI-Driven Visits</h3>
      <div class="metric-icon">
        <i class="fi fi-tr-robot"></i>
      </div>
    </div>
    <div class="metric-value">
      <span class="value"><%= company.requests.where.not(ai_provider_id: nil).count %></span>
      <span class="change positive">
        <i class="fi fi-tr-arrow-up"></i>
        <%= ((company.requests.where.not(ai_provider_id: nil).count.to_f / company.requests.count) * 100).round(1) %>%
      </span>
    </div>
    <p class="metric-period">of total visits</p>
  </div>

  <!-- Carte 3: IA d'oÃ¹ proviennent le plus de visiteurs -->
  <div class="metric-card">
    <div class="metric-header">
      <h3>Top AI Source</h3>
      <div class="metric-icon">
        <% if top_ai_provider %>
          <img src="<%= asset_path("#{top_ai_provider.name.downcase}_logo.png") %>" alt="<%= top_ai_provider.name %> logo" class="provider-logo">
        <% else %>
          <i class="fi fi-tr-robot"></i>
        <% end %>
      </div>
    </div>
    <div class="metric-value">
      <span class="value"><%= top_ai_provider&.name&.capitalize || "None" %></span>
    </div>
    <p class="metric-period"><%= top_ai_count %> visits</p>
  </div>
</div>
